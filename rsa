import sys
from random import randint
from math import gcd

def pollard_rho(n):
    x = randint(0, n - 1)
    y = x
    c = randint(0, n - 1)
    d = 1

    while d == 1:
        x = ((x * x) + c) % n
        y = ((y * y) + c) % n
        y = ((y * y) + c) % n
        d = gcd((x - y), n)

    if d == n:
        return None
    else:
        return d


# Open the file passed as a command line argument
file = open(sys.argv[1], "r")

# Iterate through each line in the file
for n in file:
    n = int(n)
    factor = pollard_rho(n)
    if factor:
        p = factor
        q = n // factor
        print(f"{n} = {p} * {q}")
    else:
        print(f"{n} is prime")

# Close the file
file.close()
